{"ast":null,"code":"var _jsxFileName = \"/Users/donromaniello/Code/JavaScript/tidey/src/components/Epicycles.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchHarmonics } from '../store/features/harmonics';\nimport L from 'leaflet';\nimport { Marker, Popup } from 'react-leaflet';\nimport drawVisualizer from './modules/drawHarmonicConstituents';\nimport icon from './assets/pin.svg';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport styles from './css/Epicycles.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Epicycles = props => {\n  _s();\n\n  const {\n    stationInfo\n  } = props;\n  const harmonics = useSelector(state => state.harmonics);\n  const [couldOpen, setCouldOpen] = useState(false);\n  const dispatch = useDispatch();\n  const DefaultIcon = L.icon({\n    iconUrl: icon,\n    // shadowUrl: iconShadow,\n    iconAnchor: [16, 42],\n    popupAnchor: [-50, 0] // this should be half width, full height of popup\n\n  });\n  L.Popup.prototype.options.offset = [0, 0]; // look here\n\n  L.Marker.prototype.options.icon = DefaultIcon;\n  L.Popup.prototype.options.maxWidth = '1000%';\n  L.Popup.prototype.options.className = 'popuply';\n  const position = [stationInfo === null || stationInfo === void 0 ? void 0 : stationInfo.lat, stationInfo === null || stationInfo === void 0 ? void 0 : stationInfo.lng];\n  const canvasName = `epicycleCanvas + ${stationInfo.id + stationInfo.lat + stationInfo.lng}`;\n  const autoPanPad = {\n    x: (window.innerWidth - 500) / 2,\n    y: (window.innerHeight - 300) / 2\n  };\n\n  const stopLooping = () => {\n    return {\n      continue: couldOpen,\n      numOfConstituents: 5\n    };\n  };\n\n  useEffect(() => {\n    if (harmonics.loaded && couldOpen) {\n      drawVisualizer(harmonics.harmonics, canvasName, constituentColors, [400, 200], stopLooping);\n    }\n  }, [canvasName, couldOpen, harmonics]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Marker, {\n      maxWidth: \"400px\",\n      position: position,\n      autoPan: true,\n      autoPanOnFocus: true,\n      riseOnHover: true,\n      eventHandlers: {\n        popupopen: () => {\n          dispatch(fetchHarmonics(stationInfo.harmonicConstituents));\n          setCouldOpen(true);\n        },\n        popupclose: () => {\n          setCouldOpen(false);\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        autoPanPadding: autoPanPad,\n        autoPan: true,\n        children: harmonics.loaded && couldOpen ? /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: canvasName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(Epicycles, \"E8zHSMiQJfuYVLMsyqll97yi6e0=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Epicycles;\nconst constituentColors = {\n  start: {\n    r: 22,\n    g: 105,\n    b: 122\n  },\n  end: {\n    r: 134,\n    g: 216,\n    b: 154\n  }\n};\nexport default Epicycles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Epicycles\");","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","fetchHarmonics","L","Marker","Popup","drawVisualizer","icon","iconShadow","styles","Epicycles","props","stationInfo","harmonics","state","couldOpen","setCouldOpen","dispatch","DefaultIcon","iconUrl","iconAnchor","popupAnchor","prototype","options","offset","maxWidth","className","position","lat","lng","canvasName","id","autoPanPad","x","window","innerWidth","y","innerHeight","stopLooping","continue","numOfConstituents","loaded","constituentColors","popupopen","harmonicConstituents","popupclose","start","r","g","b","end"],"sources":["/Users/donromaniello/Code/JavaScript/tidey/src/components/Epicycles.js"],"sourcesContent":["\nimport React, {useState, useEffect} from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { fetchHarmonics } from '../store/features/harmonics';\n\nimport L from 'leaflet';\n\nimport {\n  Marker,\n  Popup,\n} from 'react-leaflet'\n\n\nimport drawVisualizer from './modules/drawHarmonicConstituents';\n\nimport icon from './assets/pin.svg';\n\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nimport styles from './css/Epicycles.module.css'\n\nconst Epicycles = (props) => {\n\n  const { stationInfo } = props\n\n  const harmonics = useSelector((state) => state.harmonics)\n\n  const [couldOpen, setCouldOpen] = useState(false)\n\n  const dispatch = useDispatch();\n\n  const DefaultIcon = L.icon({\n    iconUrl: icon,\n    // shadowUrl: iconShadow,\n    iconAnchor: [16, 42],\n    popupAnchor: [-50, 0],// this should be half width, full height of popup\n  });\n\n  L.Popup.prototype.options.offset = [0,0] // look here\n\n  L.Marker.prototype.options.icon = DefaultIcon;\n\n  L.Popup.prototype.options.maxWidth = '1000%'\n\n  L.Popup.prototype.options.className = 'popuply'\n\n  const position = [stationInfo?.lat, stationInfo?.lng]\n\n  const canvasName = `epicycleCanvas + ${stationInfo.id + stationInfo.lat + stationInfo.lng}`\n\n  const autoPanPad = {\n    x: (window.innerWidth - 500) / 2,\n    y: (window.innerHeight - 300) / 2,\n }\n\n  const stopLooping = () => {\n    return {\n      continue: couldOpen,\n      numOfConstituents: 5,\n  }\n}\n\n  useEffect(() => {\n    if (harmonics.loaded && couldOpen) {\n      drawVisualizer(harmonics.harmonics, canvasName, constituentColors,\n        [400, 200], stopLooping)\n    }\n  }, [canvasName, couldOpen, harmonics])\n\n  return (\n    <>\n    <Marker\n    maxWidth='400px'\n    position={position}\n    autoPan={true}\n    autoPanOnFocus={true}\n    riseOnHover={true}\n    eventHandlers={{\n      popupopen: () => {\n        dispatch(fetchHarmonics(stationInfo.harmonicConstituents))\n        setCouldOpen(true);\n      },\n      popupclose: () => {\n        setCouldOpen(false)\n      }\n    }}\n    >\n      <Popup\n      autoPanPadding={autoPanPad}\n      autoPan={true}\n      >\n        {((harmonics.loaded) && couldOpen) ?\n          <canvas id={canvasName}/>\n            :\n          <div className='loading' >\n            loading...\n            </div>}\n      </Popup>\n    </Marker>\n    </>\n)\n}\n\nconst constituentColors = {\n  start : {\n    r: 22,\n    g: 105,\n    b: 122\n  },\n  end : {\n    r: 134,\n    g: 216,\n    b: 154\n  }\n}\n\n\n\nexport default Epicycles\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}