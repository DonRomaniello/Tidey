{"ast":null,"code":"var _jsxFileName = \"/Users/donromaniello/Code/JavaScript/tidey/src/components/Epicycles.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchHarmonics } from '../store/features/harmonics';\nimport L from 'leaflet';\nimport { Marker, Popup } from 'react-leaflet';\nimport drawVisualizer from './modules/drawHarmonicConstituents';\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport 'leaflet/dist/leaflet.css';\nimport styles from './css/Epicycles.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Epicycles = props => {\n  _s();\n\n  const harmonics = useSelector(state => state.harmonics);\n  const [couldOpen, setCouldOpen] = useState(false);\n  const dispatch = useDispatch();\n  let DefaultIcon = L.icon({\n    iconUrl: icon,\n    shadowUrl: iconShadow,\n    iconAnchor: [0, 0],\n    popupAnchor: [0, 0]\n  });\n  L.Marker.prototype.options.icon = DefaultIcon;\n  const {\n    stationInfo\n  } = props;\n  const position = [stationInfo === null || stationInfo === void 0 ? void 0 : stationInfo.lat, stationInfo === null || stationInfo === void 0 ? void 0 : stationInfo.lng];\n  const canvasName = `epicycleCanvas + ${stationInfo.id + stationInfo.lat + stationInfo.lng}`;\n  useEffect(() => {\n    if (harmonics.loaded && couldOpen) {\n      console.log(harmonics.harmonics);\n      drawVisualizer(harmonics.harmonics, canvasName, 5, [400, 200]);\n    }\n  }, [harmonics]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Marker, {\n      position: position,\n      autoPan: true,\n      autoPanOnFocus: true,\n      riseOnHover: true,\n      eventHandlers: {\n        click: () => {\n          dispatch(fetchHarmonics(stationInfo.harmonicConstituents));\n          setCouldOpen(!couldOpen);\n        }\n      },\n      children: harmonics.loaded && couldOpen ? /*#__PURE__*/_jsxDEV(\"canvas\", {\n        id: canvasName,\n        className: styles.popup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(Epicycles, \"E8zHSMiQJfuYVLMsyqll97yi6e0=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Epicycles;\nexport default Epicycles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Epicycles\");","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","fetchHarmonics","L","Marker","Popup","drawVisualizer","icon","iconShadow","styles","Epicycles","props","harmonics","state","couldOpen","setCouldOpen","dispatch","DefaultIcon","iconUrl","shadowUrl","iconAnchor","popupAnchor","prototype","options","stationInfo","position","lat","lng","canvasName","id","loaded","console","log","click","harmonicConstituents","popup"],"sources":["/Users/donromaniello/Code/JavaScript/tidey/src/components/Epicycles.js"],"sourcesContent":["\nimport React, {useState, useEffect} from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { fetchHarmonics } from '../store/features/harmonics';\n\nimport L from 'leaflet';\n\nimport {\n  Marker,\n  Popup,\n} from 'react-leaflet'\n\n\nimport drawVisualizer from './modules/drawHarmonicConstituents';\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nimport 'leaflet/dist/leaflet.css';\nimport styles from './css/Epicycles.module.css'\n\nconst Epicycles = (props) => {\n\n  const harmonics = useSelector((state) => state.harmonics)\n\n  const [couldOpen, setCouldOpen] = useState(false)\n\n  const dispatch = useDispatch();\n\n  let DefaultIcon = L.icon({\n    iconUrl: icon,\n    shadowUrl: iconShadow,\n    iconAnchor: [0, 0],\n    popupAnchor: [0,0],\n  });\n\n  L.Marker.prototype.options.icon = DefaultIcon;\n\n  const { stationInfo } = props\n\n  const position = [stationInfo?.lat, stationInfo?.lng]\n\n  const canvasName = `epicycleCanvas + ${stationInfo.id + stationInfo.lat + stationInfo.lng}`\n\n  useEffect(() => {\n    if (harmonics.loaded && couldOpen) {\n      console.log(harmonics.harmonics)\n      drawVisualizer(harmonics.harmonics, canvasName, 5, [400, 200])\n    }\n  }, [harmonics])\n\n  return (\n    <>\n    <Marker\n    position={position}\n    autoPan={true}\n    autoPanOnFocus={true}\n    riseOnHover={true}\n    eventHandlers={{\n      click: () => {\n        dispatch(fetchHarmonics(stationInfo.harmonicConstituents))\n        setCouldOpen(!couldOpen);\n      },\n    }}\n    >\n      {/* <Popup\n      autoPanPadding={[500, 250]}\n      autoPan={true}\n      autoClose={false}> */}\n        {((harmonics.loaded) && couldOpen) ?\n          <canvas id={canvasName} className={styles.popup}/>  :\n          <div className='loading' >\n            loading...\n            </div>}\n      {/* </Popup> */}\n    </Marker>\n    </>\n)\n}\n\n\nexport default Epicycles\n\n"],"mappings":";;;AACA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AAEA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,SAASC,cAAT,QAA+B,6BAA/B;AAEA,OAAOC,CAAP,MAAc,SAAd;AAEA,SACEC,MADF,EAEEC,KAFF,QAGO,eAHP;AAMA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,OAAOC,IAAP,MAAiB,qCAAjB;AACA,OAAOC,UAAP,MAAuB,uCAAvB;AAEA,OAAO,0BAAP;AACA,OAAOC,MAAP,MAAmB,4BAAnB;;;;AAEA,MAAMC,SAAS,GAAIC,KAAD,IAAW;EAAA;;EAE3B,MAAMC,SAAS,GAAGX,WAAW,CAAEY,KAAD,IAAWA,KAAK,CAACD,SAAlB,CAA7B;EAEA,MAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAAC,KAAD,CAA1C;EAEA,MAAMkB,QAAQ,GAAGhB,WAAW,EAA5B;EAEA,IAAIiB,WAAW,GAAGd,CAAC,CAACI,IAAF,CAAO;IACvBW,OAAO,EAAEX,IADc;IAEvBY,SAAS,EAAEX,UAFY;IAGvBY,UAAU,EAAE,CAAC,CAAD,EAAI,CAAJ,CAHW;IAIvBC,WAAW,EAAE,CAAC,CAAD,EAAG,CAAH;EAJU,CAAP,CAAlB;EAOAlB,CAAC,CAACC,MAAF,CAASkB,SAAT,CAAmBC,OAAnB,CAA2BhB,IAA3B,GAAkCU,WAAlC;EAEA,MAAM;IAAEO;EAAF,IAAkBb,KAAxB;EAEA,MAAMc,QAAQ,GAAG,CAACD,WAAD,aAACA,WAAD,uBAACA,WAAW,CAAEE,GAAd,EAAmBF,WAAnB,aAAmBA,WAAnB,uBAAmBA,WAAW,CAAEG,GAAhC,CAAjB;EAEA,MAAMC,UAAU,GAAI,oBAAmBJ,WAAW,CAACK,EAAZ,GAAiBL,WAAW,CAACE,GAA7B,GAAmCF,WAAW,CAACG,GAAI,EAA1F;EAEA5B,SAAS,CAAC,MAAM;IACd,IAAIa,SAAS,CAACkB,MAAV,IAAoBhB,SAAxB,EAAmC;MACjCiB,OAAO,CAACC,GAAR,CAAYpB,SAAS,CAACA,SAAtB;MACAN,cAAc,CAACM,SAAS,CAACA,SAAX,EAAsBgB,UAAtB,EAAkC,CAAlC,EAAqC,CAAC,GAAD,EAAM,GAAN,CAArC,CAAd;IACD;EACF,CALQ,EAKN,CAAChB,SAAD,CALM,CAAT;EAOA,oBACE;IAAA,uBACA,QAAC,MAAD;MACA,QAAQ,EAAEa,QADV;MAEA,OAAO,EAAE,IAFT;MAGA,cAAc,EAAE,IAHhB;MAIA,WAAW,EAAE,IAJb;MAKA,aAAa,EAAE;QACbQ,KAAK,EAAE,MAAM;UACXjB,QAAQ,CAACd,cAAc,CAACsB,WAAW,CAACU,oBAAb,CAAf,CAAR;UACAnB,YAAY,CAAC,CAACD,SAAF,CAAZ;QACD;MAJY,CALf;MAAA,UAgBOF,SAAS,CAACkB,MAAX,IAAsBhB,SAAvB,gBACC;QAAQ,EAAE,EAAEc,UAAZ;QAAwB,SAAS,EAAEnB,MAAM,CAAC0B;MAA1C;QAAA;QAAA;QAAA;MAAA,QADD,gBAEC;QAAK,SAAS,EAAC,SAAf;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAlBN;MAAA;MAAA;MAAA;IAAA;EADA,iBADF;AA2BD,CAzDD;;GAAMzB,S;UAEcT,W,EAIDD,W;;;KANbU,S;AA4DN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}